!function(t,n,e,i){"use strict";var o=function(){var t=e.body||e.documentElement,t=t.style;return""==t.WebkitTransition?"-webkit-":""==t.MozTransition?"-moz-":""==t.OTransition?"-o-":""==t.transition?"":!1},a=o()===!1?!1:!0,r=function(t,n,e){var i={},a=o();i[a+"transform"]="translateX("+n+")",i[a+"transition"]=a+"transform "+e+"s linear",t.css(i)},c="ontouchstart"in n,u=n.navigator.pointerEnabled||n.navigator.msPointerEnabled,f=function(t){if(c)return!0;if(!u||"undefined"==typeof t||"undefined"==typeof t.pointerType)return!1;if("undefined"!=typeof t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!=t.pointerType)return!0}else if("mouse"!=t.pointerType)return!0;return!1};t.fn.imageLightbox=function(i){var i=t.extend({selector:'id="imagelightbox"',allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,preloadNext:!0,enableKeyboard:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,onStart:!1,onEnd:!1,onLoadStart:!1,onLoadEnd:!1},i),o=t([]),l=t(),d=t(),p=0,g=0,s=0,h=!1,v=function(n){return"a"==t(n).prop("tagName").toLowerCase()&&new RegExp(".("+i.allowedTypes+")$","i").test(t(n).attr("href"))},m=function(){if(!d.length)return!0;var e=.8*t(n).width(),i=.9*t(n).height(),o=new Image;o.src=d.attr("src"),o.onload=function(){if(p=o.width,g=o.height,p>e||g>i){var a=p/g>e/i?p/e:g/i;p/=a,g/=a}d.css({width:p+"px",height:g+"px",top:(t(n).height()-g)/2+"px",left:(t(n).width()-p)/2+"px"})}},x=function(n){if(h)return!1;if(n="undefined"==typeof n?!1:"left"==n?1:-1,d.length){if(n!==!1&&(o.length<2||i.quitOnEnd===!0&&(-1===n&&0==o.index(l)||1===n&&o.index(l)==o.length-1)))return b(),!1;var e={opacity:0};a?r(d,100*n-s+"px",i.animationSpeed/1e3):e.left=parseInt(d.css("left"))+100*n+"px",d.animate(e,i.animationSpeed,function(){y()}),s=0}h=!0,i.onLoadStart!==!1&&i.onLoadStart(),setTimeout(function(){d=t("<img "+i.selector+" />").attr("src",l.attr("href")).load(function(){d.appendTo("body"),m();var e={opacity:1};if(d.css("opacity",0),a)r(d,-100*n+"px",0),setTimeout(function(){r(d,"0px",i.animationSpeed/1e3)},50);else{var c=parseInt(d.css("left"));e.left=c+"px",d.css("left",c-100*n+"px")}if(d.animate(e,i.animationSpeed,function(){h=!1,i.onLoadEnd!==!1&&i.onLoadEnd()}),i.preloadNext){var u=o.eq(o.index(l)+1);u.length||(u=o.eq(0)),t("<img />").attr("src",u.attr("href")).load()}}).error(function(){i.onLoadEnd!==!1&&i.onLoadEnd()});var e=0,c=0,g=0;d.on(u?"pointerup MSPointerUp":"click",function(t){if(t.preventDefault(),i.quitOnImgClick)return b(),!1;if(f(t.originalEvent))return!0;var n=(t.pageX||t.originalEvent.pageX)-t.target.offsetLeft;l=o.eq(o.index(l)-(p/2>n?1:-1)),l.length||(l=o.eq(p/2>n?o.length:0)),x(p/2>n?"left":"right")}).on("touchstart pointerdown MSPointerDown",function(t){return!f(t.originalEvent)||i.quitOnImgClick?!0:(a&&(g=parseInt(d.css("left"))),void(e=t.originalEvent.pageX||t.originalEvent.touches[0].pageX))}).on("touchmove pointermove MSPointerMove",function(t){return!f(t.originalEvent)||i.quitOnImgClick?!0:(t.preventDefault(),c=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,s=e-c,void(a?r(d,-s+"px",0):d.css("left",g-s+"px")))}).on("touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",function(t){return!f(t.originalEvent)||i.quitOnImgClick?!0:void(Math.abs(s)>50?(l=o.eq(o.index(l)-(0>s?1:-1)),l.length||(l=o.eq(0>s?o.length:0)),x(s>0?"right":"left")):a?r(d,"0px",i.animationSpeed/1e3):d.animate({left:g+"px"},i.animationSpeed/2))})},i.animationSpeed+100)},y=function(){return d.length?(d.remove(),void(d=t())):!1},b=function(){return d.length?void d.animate({opacity:0},i.animationSpeed,function(){y(),h=!1,i.onEnd!==!1&&i.onEnd()}):!1};return t(n).on("resize",m),i.quitOnDocClick&&t(e).on(c?"touchend":"click",function(n){d.length&&!t(n.target).is(d)&&b()}),i.enableKeyboard&&t(e).on("keyup",function(t){return d.length?(t.preventDefault(),27==t.keyCode&&b(),void((37==t.keyCode||39==t.keyCode)&&(l=o.eq(o.index(l)-(37==t.keyCode?1:-1)),l.length||(l=o.eq(37==t.keyCode?o.length:0)),x(37==t.keyCode?"left":"right")))):!0}),t(e).on("click",this.selector,function(n){return v(this)?(n.preventDefault(),h?!1:(h=!1,i.onStart!==!1&&i.onStart(),l=t(this),void x())):!0}),this.each(function(){return v(this)?void(o=o.add(t(this))):!0}),this.switchImageLightbox=function(t){var n=o.eq(t);if(n.length){var e=o.index(l);l=n,x(e>t?"left":"right")}return this},this.quitImageLightbox=function(){return b(),this},this}}(jQuery,window,document),$(function(){overlayOn=function(){$('<div id="imagelightbox-overlay"></div>').appendTo("body")},overlayOff=function(){$("#imagelightbox-overlay").remove()},closeButtonOn=function(t){$('<button type="button" id="imagelightbox-close" title="Close"></button>').appendTo("body").on("click touchend",function(){return $(this).remove(),t.quitImageLightbox(),!1})},closeButtonOff=function(){$("#imagelightbox-close").remove()},captionOn=function(){var t=$("a[href='"+$("#imagelightbox").attr("src")+"'] img").attr("alt");t.length>0&&$("<div id='imagelightbox-caption'>"+t+"</div>").appendTo("body")},captionOff=function(){$("#imagelightbox-caption").remove()};var t='a[data-imagelightbox="a"]',n=$(t).imageLightbox({onStart:function(){overlayOn(),closeButtonOn(n)},onEnd:function(){overlayOff(),captionOff(),closeButtonOff()},onLoadStart:function(){captionOff()},onLoadEnd:function(){captionOn()}})});