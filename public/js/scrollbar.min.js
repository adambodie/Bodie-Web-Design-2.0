!function(o){"use strict";var t;o.scrollupbar=function(r,i){function l(){return e.scrollTop()<=r.offset().top}function p(){return e.scrollTop()<r.offset().top+r.outerHeight()}i=o.extend({enterViewport:o.noop,fullyEnterViewport:o.noop,exitViewport:o.noop,partiallyExitViewport:o.noop},i);var s,e=o(window),n=o(document),u="fixed"==r.css("position")?0:r.offset().top,c=e.scrollTop(),a=r.position().top,f=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);return o.scrollupbar.isInViewport=p(),o.scrollupbar.isFullyInViewport=l(),f?(e.on("touchstart.scrollupbar",function(){c=e.scrollTop()}),e.on("touchend.scrollupbar",function(){var t=e.scrollTop();t<c||t-r.outerHeight()<u?t<=u?(r.css({position:"absolute",top:a}),r.show(function(){o.scrollupbar.isInViewport=!0,o.scrollupbar.isFullyInViewport=!0,i.enterViewport(),i.fullyEnterViewport()})):(r.css({position:"fixed",top:0}),o.scrollupbar.isInViewport=!0,i.enterViewport(),r.slideDown(function(){o.scrollupbar.isFullyInViewport=!0,i.fullyEnterViewport()})):t>c&&(o.scrollupbar.isFullyInViewport=!1,i.partiallyExitViewport(),r.slideUp(function(){o.scrollupbar.isInViewport=!1,i.exitViewport()})),c=t})):e.on("scroll.scrollupbar",function(){var t=e.scrollTop(),f=r.outerHeight();t<0||t>n.height()-e.height()||(s&&clearTimeout(s),t<c?(!o.scrollupbar.isInViewport&&c-f>=u&&(r.css("top",c-f),o.scrollupbar.isInViewport=!0,i.enterViewport()),l()&&(t>=u?r.css({position:"fixed",top:0}):r.css({position:"absolute",top:a}),o.scrollupbar.isFullyInViewport||(o.scrollupbar.isFullyInViewport=!0,i.fullyEnterViewport())),s=setTimeout(function(){l()||(r.css({position:"fixed",top:r.offset().top-t}),r.animate({top:0},100,function(){o.scrollupbar.isFullyInViewport=!0,i.fullyEnterViewport()}))},400)):t>c&&(o.scrollupbar.isFullyInViewport&&(r.css({position:"absolute",top:c>u?c:a}),l()||(o.scrollupbar.isFullyInViewport=!1,i.partiallyExitViewport())),o.scrollupbar.isInViewport&&!p()&&(o.scrollupbar.isInViewport=!1,i.exitViewport()),s=setTimeout(function(){p()&&t-f>=u&&r.animate({top:t-f},100,function(){o.scrollupbar.isInViewport=!1,i.exitViewport()})},400)),c=t)}),t=function(){e.off(".scrollupbar"),r.css({position:"absolute",top:a})},r},o.scrollupbar.destroy=function(){if(t)return t()},o.fn.scrollupbar=function(t){return o.scrollupbar(this,t)}}(jQuery),$("#topbar").scrollupbar();